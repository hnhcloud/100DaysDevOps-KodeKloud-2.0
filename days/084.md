# Copy Data to App Servers using Ansible

The Nautilus DevOps team needs to copy data from the jump host to all application servers in Stratos DC using Ansible. Execute the task with the following details:

a. Create an inventory file `/home/thor/ansible/inventory` on jump_host and add all application servers as managed nodes.

b. Create a playbook `/home/thor/ansible/playbook.yml` on the jump host to copy the `/usr/src/sysops/index.html` file to all application servers, placing it at `/opt/sysops`.

Note: Validation will run the playbook using the command `ansible-playbook -i inventory playbook.yml`. Ensure the playbook functions properly without any extra arguments.

## Steps

1. Move into ansible directory

    ```sh
    cd ansible
    ```

2. Create an `inventory` file and copy-paste the contents:

    ```ini
    [app]
    stapp01 ansible_user=tony ansible_ssh_password=Ir0nM@n
    stapp02 ansible_user=steve ansible_ssh_password=Am3ric@
    stapp03 ansible_user=banner ansible_ssh_password=BigGr33n

    [all:vars]
    ansible_ssh_common_args='-o StrictHostKeyChecking=no'
    ```

3. Create an `playbook.yml` file and copy-paste the contents from [this playbook file](../files/ansible_playbook_mulit-servers-84.yaml)

4. Run the playbook command:

    ```sh
    ansible-playbook -i inventory playbook.yml
    ```

## Good to Know?

### Ansible File Management

- **copy Module**: Transfer files from control node to managed nodes
- **fetch Module**: Retrieve files from managed nodes
- **synchronize Module**: Efficient file synchronization (rsync)
- **template Module**: Process and deploy template files

### File Copy Operations

- **Source Path**: File location on control node
- **Destination Path**: Target location on managed nodes
- **Permissions**: Set file ownership and permissions
- **Backup**: Create backup of existing files

### Multi-Server Management

- **Inventory Groups**: Target multiple servers simultaneously
- **Parallel Execution**: Ansible runs tasks in parallel
- **Error Handling**: Continue on some failures, stop on critical errors
- **Idempotency**: Safe to run multiple times

### Best Practices

- **File Validation**: Verify file integrity after copy
- **Atomic Operations**: Use atomic moves for critical files
- **Backup Strategy**: Always backup before modifying
- **Permission Management**: Set appropriate file permissions
