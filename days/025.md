# Git Branch Merge

The Nautilus application development team has been working on a project repository /opt/demo.git. This repo is cloned at /usr/src/kodekloudrepos on storage server in Stratos DC. They recently shared the following requirements with DevOps team:

> Create a new branch nautilus in /usr/src/kodekloudrepos/demo repo from master and copy the /tmp/index.html file (present on storage server itself) into the repo. Further, add/commit this file in the new branch and merge back that branch into master branch. Finally, push the changes to the origin for both of the branches.

## Steps

1, Login into Storage server

    ```sh
    ssh user@storage-server
    ```

2. Move into repository:

    ```sh
    sudo su
    cd /usr/src/kodekloudrepos/demo
    ```

3. Create a new branch

    ```sh
    # ensure current branch is master branch
    git branch
    # create a new branch
    git checkout -b nautilus
    ```
4. Copy files

    ```sh
    cp /tmp/index.html .
    ```
5. Commit changes

    ```sh
    git add .
    git commit -m "added tmp file"
    ```

6. Switch to master branch

    ```sh
    git switch master
    ```
7. Finally Merge `nautilus` branch and push chnages

    ```sh
    git merge nautilus
    git push
    ```

## Good to Know?

### Git Merge Types

- **Fast-forward**: Linear history, no merge commit
- **Three-way Merge**: Creates merge commit with two parents
- **Squash Merge**: Combines all commits into single commit
- **Rebase**: Replays commits on top of target branch

### Merge Workflow

1. **Switch to Target**: Checkout branch to merge into
2. **Merge Source**: `git merge source-branch`
3. **Resolve Conflicts**: Fix any merge conflicts
4. **Commit**: Complete merge with commit
5. **Push**: Upload changes to remote repository

### Conflict Resolution

- **Automatic**: Git merges non-conflicting changes
- **Manual**: Developer resolves conflicting changes
- **Merge Tools**: Use `git mergetool` for visual resolution
- **Markers**: `<<<<<<<`, `=======`, `>>>>>>>` show conflicts

### Best Practices

- **Clean Branches**: Ensure branches are up-to-date
- **Test Before Merge**: Verify changes work correctly
- **Meaningful Messages**: Write descriptive merge commit messages
- **Delete Merged Branches**: Clean up after successful merge
